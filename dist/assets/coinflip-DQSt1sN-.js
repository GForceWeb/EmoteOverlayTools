import{V as m,h as u}from"./main-Am9pVtaF.js";import{g as a}from"./index-Brfk6Bdo.js";const{globalVars:h}=m,c={heads:"https://www.joshworth.com/dev/78coins/img/cf/coin-heads.svg",tails:"https://www.joshworth.com/dev/78coins/img/cf/coin-tails.svg",edge:"https://www.joshworth.com/dev/78coins/img/cf/coin-edge.svg",line:"https://www.joshworth.com/dev/78coins/img/cf/coin-line.svg"};function y(o=1,t){for(let e=0;e<o;e++)setTimeout(()=>{const s=t||(Math.random()<.5?"Heads":"Tails");f(s)},e*150)}function f(o){const t=document.createElement("div");a.set(t,{perspective:1e3,position:"absolute",left:"50%",bottom:"15%",xPercent:-50,width:"100px",height:"100px",zIndex:10,opacity:0}),document.body.appendChild(t);const e=document.createElement("div");e.className="coin",e.id=h.divnumber.toString(),h.divnumber++,a.set(e,{width:"100px",height:"100px",position:"absolute",transformStyle:"preserve-3d",left:"50%",top:"50%",xPercent:-50,yPercent:-50}),t.appendChild(e);const s=document.createElement("div");s.className="coinFace heads",a.set(s,{width:"100%",height:"100%",position:"absolute",backfaceVisibility:"hidden",transformStyle:"preserve-3d"});const n=document.createElement("img");n.src=c.heads,n.style.width="100%",n.style.height="100%",s.appendChild(n);const i=document.createElement("div");i.className="coinFace tails",a.set(i,{width:"100%",height:"100%",position:"absolute",backfaceVisibility:"hidden",transform:"rotateX(180deg)",transformStyle:"preserve-3d"});const l=document.createElement("img");l.src=c.tails,l.style.width="100%",l.style.height="100%",i.appendChild(l);const d=document.createElement("img");d.src=c.edge,d.className="coinEdge",a.set(d,{position:"absolute",left:"50%",top:"50%",xPercent:-50,yPercent:-50,width:"100%",height:"100%",visibility:"hidden"});const r=document.createElement("img");r.src=c.line,r.className="coinLine",a.set(r,{position:"absolute",left:"50%",top:"50%",xPercent:-50,yPercent:-50,width:"100%",height:"100%",visibility:"hidden"}),e.appendChild(s),e.appendChild(i),e.appendChild(d),e.appendChild(r),g({el:e,heads:n,tails:l,edge:d,line:r,angle:0,rotateX:0,finalState:o},t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},2e4)}function p(o){a.set(o.el,{rotationX:o.rotateX});const t=o.rotateX%360,e=Math.abs(t%180-90)<15;o.edge.style.visibility=e?"visible":"hidden",o.line.style.visibility=e?"visible":"hidden"}function g(o,t){const e=a.timeline({onUpdate:function(){p(o)}});e.to(t,{duration:.5,opacity:1,scale:1,ease:"power1.out"});const s=o.finalState==="Heads"?0:180,i=(Math.floor(u.Randomizer(1,3))+4)*360+s;console.log("Coin flip rotation:",i),e.to(o,{duration:1.5,rotateX:`+=${Math.floor(i*.5)}`,angle:`+=${Math.floor(i*.5)}`,ease:"linear",onUpdate:function(){p(o)}},"<"),e.to(t,{duration:1.5,bottom:"70%",ease:"power2.out"},"<"),e.to(o,{duration:.75,rotateX:`+=${Math.floor(i*.25)}`,angle:`+=${Math.floor(i*.25)}`,ease:"linear",onUpdate:function(){p(o)}}),e.to(t,{duration:.8,bottom:"40%",ease:"power1.in"},"<"),e.to(o,{duration:.75,rotateX:i,angle:i,ease:"power1.out",onUpdate:function(){p(o)}}),e.to(t,{duration:.6,bottom:"15%",ease:"power2.in"},"<"),e.to(t,{duration:.4,bottom:"18%",ease:"power2.out"}),e.to(t,{duration:.3,bottom:"15%",ease:"power2.in"}),e.to(t,{duration:1.5,delay:15,opacity:0,ease:"power1.in"})}export{y as coinFlip};
