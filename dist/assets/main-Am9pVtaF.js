const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./bounce-BCWgx4bb.js","./index-Brfk6Bdo.js","./carousel-DjtadYdG.js","./MotionPathPlugin-Bjigi6j0.js","./cheers-BTL4YMmk.js","./choon-DoPWMiI6.js","./coinflip-DQSt1sN-.js","./comets-l_oa5YPx.js","./cube-BRIdTS7L.js","./cyclone-E3T__7K5.js","./dvd-Dk6kuO7g.js","./explode-CcApxSS3.js","./fade-BhJv5l-m.js","./firework-DtsbAVQO.js","./hypetrain-CeyXkzrU.js","./invaders-Co9TQ8T2.js","./lurking-4ka1Y_7a.js","./raiders-k_FXL0Cq.js","./rain-CHeNtmZj.js","./rise-BTJ1EvKx.js","./spiral-Czkt-J1g.js","./tetris-Dm-Ys2h8.js","./text-DtxPaDKz.js","./volcano-CLtcbESo.js","./waves-WrEZ7Cjc.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function e(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=e(o);fetch(o.href,a)}})();const g=new URLSearchParams(window.location.search);let Q=g.get("server")===null?"ws://localhost:8080/":"ws://"+g.get("server")+"/",Z=g.get("maxemotes")===null?200:parseInt(g.get("maxemotes")),ee=g.get("subonly")!==null,M=g.get("emoterain")!==null,F=g.get("welcome")!==null,W=g.get("all")!==null,B=g.get("lurk")!==null,N=g.get("kappagen")!==null,te=g.get("debug")!==null,ne=g.get("hypetrain")!==null,oe=g.get("cheers")!==null,re=g.get("choon")!==null;W&&(B=!0,M=!0,N=!0,F=!0);let ae,se=[],ie,le,ue,ce;document.getElementById("confetti-container");const R=document.documentElement;function z(){let n=Math.ceil(window.innerHeight/14),t=Math.ceil(window.innerHeight/5);R.style.setProperty("--emote-size-standard",n+"px"),R.style.setProperty("--emote-size-large",n*2+"px"),R.style.setProperty("--emote-size-small",n/2+"px"),R.style.setProperty("--avatar-size-standard",t+"px"),R.style.setProperty("--avatar-size-large",t*2+"px"),R.style.setProperty("--avatar-size-small",t/2+"px")}window.addEventListener("load",z);window.addEventListener("resize",z);const q={channelsub:ae,hypetrainCache:se,BotChat:ie,hypetimer:le,HypeTrainWrapper:ue,HypeCart:ce,divnumber:0},O={defaultemotes:50,maxemotes:Z,ws:new WebSocket(Q),warp:document.getElementById("confetti-container"),subonly:ee,emoterain:M,welcome:F,all:W,lurk:B,kappagen:N,debug:te,hypetrain:ne,cheers:oe,choon:re};O.debug&&(console.log(O),console.log(q));const G={globalVars:q,globalConst:O},me="modulepreload",de=function(n,t){return new URL(n,t).href},k={},u=function(t,e,r){let o=Promise.resolve();if(e&&e.length>0){const i=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),d=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));o=Promise.allSettled(e.map(m=>{if(m=de(m,r),m in k)return;k[m]=!0;const _=m.endsWith(".css"),y=_?'[rel="stylesheet"]':"";if(!!r)for(let E=i.length-1;E>=0;E--){const b=i[E];if(b.href===m&&(!_||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${m}"]${y}`))return;const p=document.createElement("link");if(p.rel=_?"stylesheet":me,_||(p.as="script"),p.crossOrigin="",p.href=m,d&&p.setAttribute("nonce",d),document.head.appendChild(p),_)return new Promise((E,b)=>{p.addEventListener("load",E),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(i){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i}return o.then(i=>{for(const s of i||[])s.status==="rejected"&&a(s.reason);return t().catch(a)})},D=Object.assign({"./animations/bounce.ts":()=>u(()=>import("./bounce-BCWgx4bb.js"),__vite__mapDeps([0,1]),import.meta.url),"./animations/carousel.ts":()=>u(()=>import("./carousel-DjtadYdG.js"),__vite__mapDeps([2,1,3]),import.meta.url),"./animations/cheers.ts":()=>u(()=>import("./cheers-BTL4YMmk.js"),__vite__mapDeps([4,1]),import.meta.url),"./animations/choon.ts":()=>u(()=>import("./choon-DoPWMiI6.js"),__vite__mapDeps([5,1]),import.meta.url),"./animations/coinflip.ts":()=>u(()=>import("./coinflip-DQSt1sN-.js"),__vite__mapDeps([6,1]),import.meta.url),"./animations/comets.ts":()=>u(()=>import("./comets-l_oa5YPx.js"),__vite__mapDeps([7,1]),import.meta.url),"./animations/cube.ts":()=>u(()=>import("./cube-BRIdTS7L.js"),__vite__mapDeps([8,1]),import.meta.url),"./animations/cyclone.ts":()=>u(()=>import("./cyclone-E3T__7K5.js"),__vite__mapDeps([9,1]),import.meta.url),"./animations/dvd.ts":()=>u(()=>import("./dvd-Dk6kuO7g.js"),__vite__mapDeps([10,1]),import.meta.url),"./animations/explode.ts":()=>u(()=>import("./explode-CcApxSS3.js"),__vite__mapDeps([11,1]),import.meta.url),"./animations/fade.ts":()=>u(()=>import("./fade-BhJv5l-m.js"),__vite__mapDeps([12,1]),import.meta.url),"./animations/firework.ts":()=>u(()=>import("./firework-DtsbAVQO.js"),__vite__mapDeps([13,1]),import.meta.url),"./animations/hypetrain.ts":()=>u(()=>import("./hypetrain-CeyXkzrU.js"),__vite__mapDeps([14,1]),import.meta.url),"./animations/invaders.ts":()=>u(()=>import("./invaders-Co9TQ8T2.js"),__vite__mapDeps([15,1]),import.meta.url),"./animations/lurking.ts":()=>u(()=>import("./lurking-4ka1Y_7a.js"),__vite__mapDeps([16,1]),import.meta.url),"./animations/raiders.ts":()=>u(()=>import("./raiders-k_FXL0Cq.js"),__vite__mapDeps([17,1]),import.meta.url),"./animations/rain.ts":()=>u(()=>import("./rain-CHeNtmZj.js"),__vite__mapDeps([18,1]),import.meta.url),"./animations/rise.ts":()=>u(()=>import("./rise-BTJ1EvKx.js"),__vite__mapDeps([19,1]),import.meta.url),"./animations/spiral.ts":()=>u(()=>import("./spiral-Czkt-J1g.js"),__vite__mapDeps([20,1]),import.meta.url),"./animations/tetris.ts":()=>u(()=>import("./tetris-Dm-Ys2h8.js"),__vite__mapDeps([21,1]),import.meta.url),"./animations/text.ts":()=>u(()=>import("./text-DtxPaDKz.js"),__vite__mapDeps([22,1]),import.meta.url),"./animations/volcano.ts":()=>u(()=>import("./volcano-CLtcbESo.js"),__vite__mapDeps([23,1,3]),import.meta.url),"./animations/waves.ts":()=>u(()=>import("./waves-WrEZ7Cjc.js"),__vite__mapDeps([24,1]),import.meta.url)}),l={};async function fe(){for(const n in D){const t=await D[n]();Object.assign(l,t)}}fe();function pe(n,t){return n+Math.random()*(t-n)}function he(){var n=Math.random();return n<.5?-200:innerHeight+200}function ge(n){return n.match(/\s[0-9]+/g)}let P=0;function _e(n,t){return function(...e){const r=Date.now();r-P>=t?(n(...e),P=r):setTimeout(()=>{n(...e),P=Date.now()},t-(r-P))}}async function ye(n,t=!1){let e="https://decapi.me/twitch/avatar/"+n,r;t&&(e+="?id=true");try{r=await ve(e).then(function(o){return console.log(o),o}).catch(function(o){throw console.error(o),o})}catch(o){throw console.error(o),o}return r}function ve(n){return new Promise(function(t,e){var r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState===4&&(r.status===200?t(r.responseText):e("Error: "+r.status))},r.open("GET",n,!0),r.send()})}function Ee(n,t){let e=ge(n);return e===null?null:t=="count"?e.length==2||e.length==1?parseInt(e[0].trim()):null:t=="interval"&&e.length==2?parseInt(e[1].trim()):null}function we(n){return new Promise(t=>setTimeout(t,n))}function be(){return Math.random()<.5?-1:1}function Te(n){const t=document.getElementById(n);t&&t.remove()}const T={delay:we,randomSign:be,removeelement:Te,getCommandValue:Ee,Randomizer:pe,TopOrBottom:he,getTwitchAvatar:ye,executeWithInterval:_e},{globalConst:f}=G;let Re=!1;function Le(n){var a,i,s,d,m,_,y,h;const e=(((i=(a=n.data)==null?void 0:a.message)==null?void 0:i.message)||"").toLowerCase(),r=((d=(s=n.data)==null?void 0:s.message)==null?void 0:d.username)||"",o=((_=(m=n.data)==null?void 0:m.message)==null?void 0:_.userId)||"";if(e.includes("!lurk")){if(!f.lurk&&!f.all){console.log("Lurk Not Enabled");return}X(r)}if(e.includes("!so")){if(!f.welcome&&!f.all){console.log("Shoutout Not Enabled");return}J(e)}if(e.includes("!choon")||e.includes("!tune")){if(!f.all&&!f.choon){console.log("Choon Command Not Enabled");return}$(r)}if(e.includes("!cheers")){if(!f.all&&!f.cheers){console.log("Cheers Command Not Enabled");return}let p;e.includes("@")&&(p=e.split("@")[1]),U(r,p)}if(e.includes("!jointrain")){if(!f.debug){console.log("Join Train Command Not Enabled");return}l.hypetrainprogression(o)}typeof((h=(y=n.data)==null?void 0:y.message)==null?void 0:h.emotes)<"u"&&j(n)}function Pe(n){var t;n.data,(t=n.data)==null||t.name}function j(n){var y,h,p,E,b,S,I,V;const t=((h=(y=n.data)==null?void 0:y.message)==null?void 0:h.message)||"",e=t.toLowerCase();(E=(p=n.data)==null?void 0:p.message)!=null&&E.role;const r=((S=(b=n.data)==null?void 0:b.message)==null?void 0:S.subscriber)||!1,o=((V=(I=n.data)==null?void 0:I.message)==null?void 0:V.emotes)||[],a=o.length;let i=[];for(let c=0;c<a;c++)o[c]&&o[c].imageUrl&&(i[c]=o[c].imageUrl);let s=T.getCommandValue(e,"interval"),d=T.getCommandValue(e,"count");d!=null&&d>f.maxemotes&&(d=f.maxemotes);let m=[["!er rain","rain",50,50,"rain"],["!er rise","rise",100,50,"rise"],["!er explode","explode",100,20,"explode"],["!er volcano","volcano",100,20,"volcano"],["!er firework","firework",100,20,"firework"],["!er rightwave","rightWave",100,20,"waves"],["!er leftwave","leftWave",100,20,"waves"],["!er carousel","carousel",100,150,"carousel"],["!er spiral","spiral",100,170,"spiral"],["!er comets","comets",100,50,"comets"],["!er dvd","dvd",8,50,"dvd"],["!er text","text",1,25,"text","HYPE"],["!er cyclone","cyclone",100,30,"cyclone"],["!er tetris","tetris",50,40,"tetris"]];if(f.emoterain&&f.subonly&&!r){console.log("Sub Only Mode enabled, Messsage was not from a Sub");return}if(m.forEach(function(c){if(e.startsWith(c[0])){if(d||(d=c[2]),s||(s=c[3]),c[1]=="emoteText"){let w="Hype",x=/text (\S*)/gm.exec(t);x&&x[1]&&(w=x[1]),o.length<1;let H="";for(const Y of o)H=H+Y.name+" ";console.log("running emoteText:  "+w+". module: "+c[4]),l[c[1]](i,w,s);return}console.log("running "+c[1]+" with "+d+" emote(s) and interval "+s+". module: "+c[4]),l.hasOwnProperty(c[1])?l[c[1]](i,d,s):console.log("Animation Function Mapping Failed")}}),f.kappagen){if(f.subonly&&!r){console.log("Sub Only Mode enabled, Messsage was not from a Sub");return}if(e.includes("!k ")){let c=Math.round(T.Randomizer(0,m.length-1));d||(d=m[c][2]),s||(s=m[c][3]);let w=m[c][1];console.log("Rolled: "+c+". Running: "+w+" with "+d+" emote(s) and interval "+s),l.hasOwnProperty(w)&&typeof l[w]=="function"?l[w](i,d,s):console.log("Animation Function Mapping Failed")}}switch(Math.round(T.Randomizer(1,4))){case 1:l.rain(i,a);break;case 2:l.bounce(i,a);break;case 3:l.fade(i,a);break;case 4:l.dvd(i,a);break}}function xe(n){var r,o;if(!f.welcome&&!f.all){console.log("First Words Not Enabled");return}var t=((o=(r=n.data)==null?void 0:r.message)==null?void 0:o.username)||"",e=new XMLHttpRequest;console.log("created xmlhttp object"),e.onreadystatechange=function(){if(this.readyState==4&&this.status==200){console.log("got a user image response back");let a=[e.responseText];l.rain(a,f.defaultemotes,50)}},console.log(t),e.open("GET","https://decapi.me/twitch/avatar/"+t,!0),e.send()}async function U(n,t){console.log("Cheers: "+n+(t||""));let e=[];try{e.push(await T.getTwitchAvatar(n))}catch(o){throw console.error(o),o}if(t)try{e.push(await T.getTwitchAvatar(t))}catch(o){throw console.error(o),o}else e.push("https://static-cdn.jtvnw.net/jtv_user_pictures/8e051a26-051f-4abe-bcfa-e13a5d13fad0-profile_image-300x300.png");T.executeWithInterval(function(){l.cheers(e)},15e3)()}function $(n){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(this.readyState==4&&this.status==200){console.log("got a user image response back: "+t.responseText);let e=[t.responseText];l.choon(e)}},t.open("GET","https://decapi.me/twitch/avatar/"+n,!0),t.send()}function X(n){var t=new XMLHttpRequest;console.log("created xmlhttp object"),t.onreadystatechange=function(){this.readyState==4&&this.status==200&&(console.log("got the users image back"),l.lurking(t.responseText,3))},t.open("GET","https://decapi.me/twitch/avatar/"+n,!0),t.send()}function J(n){let t=/\@(.*)/,e=n.match(t);if(!e||!e[1])return;let r=e[1];console.log(r);let o=new XMLHttpRequest;console.log("created xmlhttp object"),o.onreadystatechange=function(){if(this.readyState==4&&this.status==200){console.log("got a user image response back");let a=[o.responseText];l.rain(a,f.defaultemotes,50)}},o.open("GET","https://decapi.me/twitch/avatar/"+r,!0),o.send()}const A={chatMessageHandler:Le,actionsHandler:Pe,emoteMessageHandler:j,firstWordsHander:xe,cheersCommand:U,choonCommand:$,lurkCommand:X,shoutoutCommand:J},{globalVars:C,globalConst:v}=G;let L=v.ws;function K(){"WebSocket"in window&&(L.onclose=function(){setTimeout(K,1e4)},L.onopen=function(){L.send(JSON.stringify({request:"Subscribe",events:{Twitch:["ChatMessage","FirstWord","HypeTrainStart","HypeTrainUpdate","HypeTrainLevelUp","HypeTrainEnd","Raid","Cheer","Sub","Resub","GiftBomb","GiftSub"],Raw:["Action"],General:["Custom"]},id:"123"})),L.send(JSON.stringify({request:"GetActions",id:"ActionList"}))},L.onmessage=function(n){var o,a,i,s,d,m,_,y;const t=n.data,e=JSON.parse(t);if(console.log(e),typeof e.actions<"u"&&typeof e.id=="string"&&e.id==="ActionList"){let h=e.actions.filter(function(p){return p.name=="ERTwitchBotChat"});console.log(h),h.length>=1&&console.log("True")}if(typeof e.event>"u"){console.log("Event undefined");return}if(typeof e.event.type>"u"){console.log("Event Type undefined");return}let r=e.event.type;if(r=="ChatMessage"){A.chatMessageHandler(e),v.debug&&console.log("Passed to ChatMessageHandler");return}if(r=="FirstWord"){A.firstWordsHander(e);return}if(r=="Sub"||r=="Resub"||r=="GiftBomb"||r=="GiftSub"||r=="Cheer"){let h=(a=(o=e.data)==null?void 0:o.message)!=null&&a.username?e.data.message.username:(i=e.data)==null?void 0:i.userName;h&&(C.hypetrainCache.unshift(h),C.hypetrainCache[3]&&C.hypetrainCache.pop())}if(r=="HypeTrainStart"&&(v.hypetrain||v.all)){l.hypetrain.hypetrainstart();return}if(r=="HypeTrainLevelUp"&&(v.hypetrain||v.all)){l.hypetrain.hypetrainlevelup();return}if(r=="HypeTrainUpdate"&&(v.hypetrain||v.all)){const h=(d=(s=e.data)==null?void 0:s.last_contribution)==null?void 0:d.user_id;h&&l.hypetrain.hypetrainprogression(h);return}if(r=="HypeTrainEnd"&&(v.hypetrain||v.all)){l.hypetrain.hypetrainfinish();return}if(r!="Raid"){if(r=="Custom"){if(((m=e.data)==null?void 0:m.coinFlipResult)=="undefined")return;((_=e.data)==null?void 0:_.coinFlipResult)=="Heads"&&l.coinflip.createCoins(1,"Heads"),((y=e.data)==null?void 0:y.coinFlipResult)=="Tails"&&l.coinflip.createCoins(1,"Tails")}if(r=="Action"){A.actionsHandler(e);return}}})}const Ae={connectws:K},{connectws:Ce}=Ae;function Oe(){Ce(),window.animations=l}Oe();export{G as V,T as h};
